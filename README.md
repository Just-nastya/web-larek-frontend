# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/model/ — папка с моделями данных (DataModel, CartModel, FormModel)
- src/view/ — папка с компонентами представления (ProductCard, ProductPreview, ShoppingCart, OrderForm, ContactForm, OrderSuccess, ModalWindow, CartItem)
- src/types/ — папка с типами TypeScript
- src/utils/ — папка с утилитами и константами

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


---

## Архитектура проекта
В проекте используется архитектурный паттерн `MVP (Model-View-Presenter)`. Логика приложения разделена на три основных слоя:

- `Model` — отвечает за управление данными и бизнес-логику приложения, а также взаимодействие с API. 

- `View` — отвечает за отображение интерфейса пользователю и обработку пользовательских данных ввода. 

- `Presenter (Посредник)` — содержит логику приложения и связывает `Model` и `View`. 


---

## Model. Модели данных
Модель получает информацию с сервера и передаёт её `View` для отображения. Каждая модель представляет собой независимый компонент, который может использовать данные и обновлять их по мере необходимости.

- `ApiModel` —  класс унаследован от базового класса `Api`. Взаимодействует с сервером, получает список товаров и отправляет заказы.

- `BasketModel` —  класс управляет состоянием корзины покупок, такими как количество товаров, общая стоимость и добавление/удаление товаров.

- `FormModel` —  класс работает с пользовательскими данными для обработки заказов (адрес, контактные данные и способ оплаты).


---

## View. Описание интерфейса
Представление отвечает за отображение данных и взаимодействие с пользователем. Компоненты View получают данные от Model и представляют их в пользовательском интерфейсе.
- `MainScreen` —  класс для просмотра каталога продуктов.

- `Card` —  универсальный класс для создания карточек товара.

- `ModalScreen` —  универсальный класс для модальных окон. Все модальные окна наследуются от него и переопределяют методы для своих нужд.

- `BasketScreen` — класс для просмотра содержимого корзины.

- `ContactScreen` — класс отображает форму для ввода контактных данных.

- `DeliveryScreen` — класс отображает форму для ввода адреса и выбора способа оплаты

- `SuccessScreen` — класс отображает сообщение об успешном оформлении заказа.


---

## Presenter. Посредник
В проекте роль посредника выполняет основной скрипт `index.ts` и `EventEmitter`.

`EventEmitter` — класс, который обеспечивает работу событийной модели. Управляет взаимодействием при возникновении событий между `View` и `Model`. При этом компоненты не знают друг о друге напрямую. 

Методы:
- `on` — установка слушателя событий.
- `off` — снятие  слушателя событий.
- `emit` — вызов всех слушателей при возникновении события.
- `onAll` — возможность слушать все события.
- `offAll` — сбросс возможности слушать все события.
- `trigger` — создание триггера (функции), которая при вызове генерирует определенное событие.


---

## Типы данных проекта
Типы данных определены в `src/types/index.ts`:
- `IProductItem` — интерфейс, который описывает элемент продукта.
```
	id: string; // уникальный идентификатор продукта
	title: string; // название продукта
	description: string; // описание продукта
	image: string; // URL-адрес изображения продукта
	category: string; // категория продукта
	price: number | null; // цена продукта, если нет цены, то товар бесценен
```

- `IActions` — интерфейс, который описывает обработчик событий по клику мыши.
```
	handleClick?: (event: MouseEvent) => void;
```

- `IOrderForm` — интерфейс, который описывает данные в форме заказа. 
```
	paymentMethod?: string; // способ оплаты
	deliveryAddress?: string; // адрес доставки 
	contactPhone?: string; // контактный номер телефона
	contactEmail?: string; // контактный адрес электронной почты
    totalAmount?: number; // общая стоимость заказа
```

- `IOrder` — интерфейс, который описывает полные данные заказа для отправки по API. 
```
	paymentMethod: string; // способ оплаты
	deliveryAddress: string; // адрес доставки 
	contactPhone: string; // контактный номер телефона
	contactEmail: string; // контактный адрес электронной почты
    totalAmount: number; // общая стоимость заказа
	productItems: string[]; // массив идентификаторов продуктов, которые были выбраны пользователем
```

- `IOrderResult` — интерфейс, который описывает результат успешного заказа от API.
```
	orderId: string; // уникальный идентификатор заказа
	totalAmount: number; // общая стоимость заказа 
```

- `TFormValidationErrors` — тип ошибки валидации формы.
```
type FormValidationErrors = Partial<Record<keyof IOrder, string>>; // отображает каждое поле формы (например, payment, address, phone, и т. д.) в строке ошибки.
```


---

## Базовый класс
`Api` — класс для работы с сервером.

Методы:
- `get(endpoint: string): Promise` — GET-запрос
- `post(endpoint: string, data: object): Promise` — POST-запрос
- `handleResponse(response: Response): Promise` — обработка ответа